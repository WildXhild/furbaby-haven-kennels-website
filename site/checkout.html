<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout | FURBABY HAVEN KENNELS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f6f6f6;
    }

    header {
      background: #111;
      color: white;
      padding: 20px;
      text-align: center;
    }

    h1, h2, h3 {
      margin: 10px 0;
    }

    /* CART GRID */
    .cart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      padding: 30px;
    }

    .card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      position: relative;
    }

    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .card-content {
      padding: 10px;
      text-align: center;
    }

    .remove-btn {
      background: red;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 8px;
      font-weight: bold;
    }

    /* TOTAL */
    .total-box {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      padding: 10px;
    }

    .clear-cart {
      background: #111;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 20px;
    }

    /* FORM */
    .form-box {
      background: white;
      max-width: 500px;
      margin: 30px auto;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .form-box input,
    .form-box textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 15px;
    }

    /* CHAT BUTTONS */
    .chat-btn {
      display: inline-block;
      margin: 6px;
      padding: 10px 18px;
      border-radius: 8px;
      font-weight: bold;
      color: white;
      text-decoration: none;
      cursor: pointer;
    }

    .email { background: #ffcc00; color: #111; }
    .sms { background: #25D366; }
    .ig { background: #E1306C; }
    .tt { background: #000; }

    footer {
      background: #111;
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      font-size: 14px;
    }

    @media (max-width: 600px) {
      .cart-grid { padding: 15px; }
    }
 /* TOGGLE BUTTON STYLES */
.toggle-container {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 20px 0;
  gap: 15px;
}

.toggle-switch {
  position: relative;
  width: 200px;
  height: 40px;
  background: #ccc;
  border-radius: 20px;
  cursor: pointer;
  transition: background 0.3s;
}

.toggle-switch.active {
  background: #ffcc00;
}

.toggle-slider {
  position: absolute;
  top: 3px;
  left: 3px;
  width: 94px;
  height: 34px;
  background: white;
  border-radius: 17px;
  transition: transform 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: #333;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.toggle-switch.active .toggle-slider {
  transform: translateX(100px);
}

.toggle-labels {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 15px;
  font-weight: bold;
  color: white;
  pointer-events: none;
}

.toggle-labels span {
  z-index: 1;
}

.toggle-labels span:last-child {
  color: #333;
}

.toggle-switch.active .toggle-labels span:first-child {
  color: #333;
}

.toggle-switch.active .toggle-labels span:last-child {
  color: white;
} </style>
</head>

<body>

<header>
  <h1>Checkout</h1>
  <p>Review your selected puppies</p>
</header>

<section>
  <div style="text-align:center;">
    <button class="clear-cart" onclick="clearCart()">Clear Cart</button>
  </div>

  <div class="cart-grid" id="cartGrid"></div>

  <div class="total-box" id="totalPrice"></div>
<!-- TOGGLE BUTTON -->
<div class="toggle-container">
  <span>Payment Type:</span>
  <div class="toggle-switch" id="paymentToggle">
    <div class="toggle-labels">
      <span>Order</span>
      <span>Deposit</span>
    </div>
    <div class="toggle-slider">Order</div>
  </div>
</div>
</section>

<div class="form-box">
  <h2 style="text-align:center;">Your Details</h2>

  <input id="name" placeholder="Full Name">
  <input id="email" placeholder="Email Address">
  <textarea id="address" placeholder="City / Location"></textarea>

  <h3 style="text-align:center;">Continue via</h3>

  <div style="text-align:center;">
    <a id="emailBtn" class="chat-btn email">Email</a>
    <a id="smsBtn" class="chat-btn sms">Text Us</a>
    <a id="igBtn" class="chat-btn ig">Instagram</a>
    <a id="ttBtn" class="chat-btn tt">TikTok</a>
  </div>
</div>

<footer>
  Â© 2025 FURBABY HAVEN KENNELS. All rights reserved.
</footer>

<script>
  const cartGrid = document.getElementById("cartGrid");
  const totalBox = document.getElementById("totalPrice");

  function getCart() {
    return JSON.parse(localStorage.getItem("cart")) || [];
  }

  function saveCart(cart) {
    localStorage.setItem("cart", JSON.stringify(cart));
  }

  function renderCart()
   {// Toggle functionality
const paymentToggle = document.getElementById("paymentToggle");
const toggleSlider = paymentToggle.querySelector(".toggle-slider");

paymentToggle.addEventListener("click", function() {
  this.classList.toggle("active");
  
  const isActive = this.classList.contains("active");
  toggleSlider.textContent = isActive ? "Deposit" : "Order";
  
  // Update total based on toggle state
  const cart = getCart();
  if (cart.length > 0) {
    if (isActive) {
      // Show deposit total
      const depositTotal = cart.length * 500;
      totalBox.textContent = "Total: $" + depositTotal;
    } else {
      // Show order total
      const orderTotal = cart.reduce((sum, pup) => sum + (pup.price || 0), 0);
      totalBox.textContent = "Total: $" + orderTotal;
    }
  }
});
  const cart = getCart();
  cartGrid.innerHTML = "";
  let total = 0;
  let depositTotal = 0;

  if (cart.length === 0) {
    cartGrid.innerHTML = "<p style='text-align:center;'>Your cart is empty.</p>";
    totalBox.textContent = "";
    return;
  }

  cart.forEach((pup, index) => {
    // Use price if available, otherwise show "Contact for price"
    const price = pup.price || 0;
    total += price;
    depositTotal += 500; // $500 deposit per item

    const div = document.createElement("div");
    div.className = "card";
    // Use the first image from gallery if available
    const imgSrc = pup.gallery ? pup.gallery[0] : pup.img;
    div.innerHTML = `
      <img src="${imgSrc}">
      <div class="card-content">
        <h3>${pup.name}</h3>
        <p>${pup.gender}</p>
        <p>Color: ${pup.color}</p>
        <p class="price">$${pup.price ? pup.price : 'Contact for price'}</p>
        <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
      </div>
    `;
    cartGrid.appendChild(div);
  });

  // Initial display shows order total
  totalBox.textContent = "Total: $" + total;
}

function removeItem(index) {
  const cart = getCart();
  cart.splice(index, 1);  // Remove the item
  saveCart(cart);         // Save the updated cart
  
  // Check if the payment toggle exists and get its state
  const paymentToggle = document.getElementById("paymentToggle");
  const isDepositMode = paymentToggle && paymentToggle.classList.contains("active");
  
  // Update the total based on the current toggle state
  if (cart.length === 0) {
    totalBox.textContent = "";
  } else if (isDepositMode) {
    // Show deposit total ($500 per item)
    const depositTotal = cart.length * 500;
    totalBox.textContent = "Total: $" + depositTotal;
  } else {
    // Show order total (sum of all puppy prices)
    const orderTotal = cart.reduce((sum, pup) => sum + (pup.price || 0), 0);
    totalBox.textContent = "Total: $" + orderTotal;
  }
  
  // Re-render the cart display
  renderCart();
}

function clearCart() {
  localStorage.removeItem("cart");
  cartGrid.innerHTML = "<p style='text-align:center;'>Your cart is empty.</p>";
  totalBox.textContent = "";
}

  function buildMessage() {
  const cart = getCart();
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;
  const isDeposit = document.getElementById("paymentToggle").classList.contains("active");
  
  let pups = cart.map(p => `${p.name} ($${p.price})`).join(", ");
  let totalAmount = document.getElementById("totalPrice").textContent.replace("Total: $", "");
  
  if (isDeposit) {
    return encodeURIComponent(
      `Hello, my name is ${name}.
Email: ${email}
Location: ${address}

I want to deposit $${totalAmount} for the following items: ${pups}`
    );
  } else {
    return encodeURIComponent(
      `Hello, my name is ${name}.
Email: ${email}
Location: ${address}

I am interested in: ${pups}`
    );
  }
}
  document.getElementById("emailBtn").onclick = () => {
    window.location.href =
      "mailto:furbabyhavenkennels11@gmail.com?subject=Puppy Inquiry&body=" + buildMessage();
  };

  document.getElementById("smsBtn").onclick = () => {
    window.location.href =
      "sms:+13372181591?body=" + buildMessage();
  };

  document.getElementById("igBtn").onclick = () => {
    window.open("https://instagram.com/furbabykennclub", "_blank");
  };

  document.getElementById("ttBtn").onclick = () => {
    window.open("https://tiktok.com/@furbabykennels", "_blank");
  };

  renderCart();
</script>

</body>
</html>